"use strict";(self.webpackChunksource_2_wiki=self.webpackChunksource_2_wiki||[]).push([[99936],{14639:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/halfedge-reading-1-72b3cd309a87a5859afa6808c39c9ce5.png"},16861:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/halfedge-reading-3-1c69aeeb14126fa11c8012970dc61168.png"},20514:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/halfedge-reading-4-b53db9895819a2b1895b7228d04b0e53.png"},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(96540);const r={},a=i.createContext(r);function t(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}},41643:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/halfedge-reading-5-8415630bbe3bbec19f7ea228f3ab7219.png"},48910:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/half-edge-example-355c08a54eb35ed3f5b51868b82106eb.png"},90385:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"FileFormats/vmap/index","title":"VMAP","description":"The file format for uncompiled Source2 maps.","source":"@site/docs/FileFormats/vmap/index.mdx","sourceDirName":"FileFormats/vmap","slug":"/FileFormats/vmap/","permalink":"/FileFormats/vmap/","draft":false,"unlisted":false,"editUrl":"https://github.com/Source2Wiki/Source2Wiki/blob/master/docs/FileFormats/vmap/index.mdx?plain=1","tags":[],"version":"current","frontMatter":{"description":"The file format for uncompiled Source2 maps.","title":"VMAP"},"sidebar":"tutorialSidebar","previous":{"title":"KV3","permalink":"/FileFormats/kv3"},"next":{"title":"example.vmap","permalink":"/FileFormats/vmap/example.vmap"}}');var r=s(74848),a=s(28453);const t={description:"The file format for uncompiled Source2 maps.",title:"VMAP"},l=void 0,d={},o=[{value:"Vmap example",id:"vmap-example",level:2},{value:"Vmap file structure",id:"vmap-file-structure",level:2},{value:"&quot;$prefix_element$&quot;",id:"prefix_element",level:3},{value:"DMElement",id:"dmelement",level:3},{value:"CMapRootElement",id:"cmaprootelement",level:3},{value:"MapNode",id:"mapnode",level:3},{value:"BaseEntity",id:"baseentity",level:3},{value:"Inherits from MapNode",id:"inherits-from-mapnode",level:4},{value:"DmePlugList",id:"dmepluglist",level:3},{value:"DmeConnectionData",id:"dmeconnectiondata",level:3},{value:"EditGameClassProps",id:"editgameclassprops",level:3},{value:"CMapWorld",id:"cmapworld",level:3},{value:"Inherits from BaseEntity -&gt; MapNode",id:"inherits-from-baseentity---mapnode",level:4},{value:"CStoredCamera",id:"cstoredcamera",level:3},{value:"CStoredCameras",id:"cstoredcameras",level:3},{value:"CVisibilityMgr",id:"cvisibilitymgr",level:3},{value:"Inherits from MapNode",id:"inherits-from-mapnode-1",level:4},{value:"CMapSelectionSet",id:"cmapselectionset",level:3},{value:"CObjectSelectionSetDataElement",id:"cobjectselectionsetdataelement",level:3},{value:"CFaceSelectionSetDataElement",id:"cfaceselectionsetdataelement",level:3},{value:"CMapPrefab",id:"cmapprefab",level:3},{value:"Inherits from MapNode",id:"inherits-from-mapnode-2",level:4},{value:"CMapInstance",id:"cmapinstance",level:3},{value:"Inherits from MapNode",id:"inherits-from-mapnode-3",level:4},{value:"CMapGroup",id:"cmapgroup",level:3},{value:"Inherits from MapNode",id:"inherits-from-mapnode-4",level:4},{value:"CMapVariableSet",id:"cmapvariableset",level:3},{value:"CMapVariableChoiceGroup",id:"cmapvariablechoicegroup",level:3},{value:"CMapMesh",id:"cmapmesh",level:3},{value:"Inherits from MapNode",id:"inherits-from-mapnode-5",level:4},{value:"CDmePolygonMesh",id:"cdmepolygonmesh",level:3},{value:"CDmePolygonMeshDataArray",id:"cdmepolygonmeshdataarray",level:3},{value:"CDmePolygonMeshDataStream",id:"cdmepolygonmeshdatastream",level:3},{value:"Hammer meshes",id:"hammer-meshes",level:2},{value:"Explanation of half-edge meshes",id:"explanation-of-half-edge-meshes",level:3},{value:"Topology limitations",id:"topology-limitations",level:3},{value:"Anatomy of a Hammer mesh",id:"anatomy-of-a-hammer-mesh",level:3},{value:"Explanation of CDmePolygonMesh",id:"explanation-of-cdmepolygonmesh",level:4},{value:"Reading polygon data out of hammer meshes from code",id:"reading-polygon-data-out-of-hammer-meshes-from-code",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Game:i,Tool:t}=n;return i||m("Game",!0),t||m("Tool",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[".vmap is the file format for uncompiled Source2 maps when they are being edited in ",(0,r.jsx)(n.a,{href:"/EngineTools/HammerEditor/",children:"Hammer"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["It is a ",(0,r.jsx)(n.a,{href:"/FileFormats/dmx",children:"DMX"})," file under binary encoding version 4, ",(0,r.jsx)(n.a,{href:"/EngineTools/HammerEditor/",children:"Hammer"})," can export a plain text version if you go to ",(0,r.jsx)(n.code,{children:"File -> Save Copy As Text"})]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(t,{name:"s2v"})," can decompile compiled maps (.vmap_c usually contained within a VPK) into a .vmap",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(t,{name:"github",suffix:"Datamodel.NET",link:"https://github.com/kristiker/Datamodel.NET"})," can be used to read and write kv2 files including vmaps, using C#."]}),(0,r.jsxs)(n.p,{children:["An implemented version of the vmap format as described here can be found in the source code of ",(0,r.jsx)(t,{name:"github",suffix:"VRF (s2v)",link:"https://github.com/ValveResourceFormat/ValveResourceFormat/blob/master/ValveResourceFormat/IO/ContentFormats/ValveMap.cs"}),", used for vmap_c decompilation."]})]}),"\n",(0,r.jsx)(n.h2,{id:"vmap-example",children:"Vmap example"}),"\n",(0,r.jsxs)(n.p,{children:["The following is a simple vmap in plain text format from ",(0,r.jsx)(i,{name:"cs2"})," consisting of a hammer mesh and an entity."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["The Root of a vmap DMX file is ",(0,r.jsx)(n.code,{children:"CMapRootElement"}),(0,r.jsx)(n.br,{}),"\n","In the text encoding of DMX, when an Element is only referenced once, it will be directly inserted as a value of the property that references it, when it's referenced multiple times, it will be extracted and put into the Root element, and everything referencing it will reference its UUID."]})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/FileFormats/vmap/example.vmap",children:"Vmap example"})," (external page due to the large size)"]}),"\n",(0,r.jsx)(n.h2,{id:"vmap-file-structure",children:"Vmap file structure"}),"\n",(0,r.jsxs)(n.p,{children:["A list of vmap DMX nodes can be found below, this list is based on a ",(0,r.jsx)(i,{name:"cs2"})," version 40 vmap."]}),"\n",(0,r.jsxs)(n.p,{children:["Annoyingly the ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Naming_convention_(programming)",children:"naming convention"})," of attributes in vmaps is all over the place, some of the cases used include:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"flatcase"}),"\n",(0,r.jsx)(n.li,{children:"camelCase"}),"\n",(0,r.jsx)(n.li,{children:"PascalCase"}),"\n",(0,r.jsx)(n.li,{children:"snake_case"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"m_"})," member variable notation"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"todo",children:(0,r.jsx)(n.p,{children:"Would be nice to have info on which nodes exists in what vmap version, and possibly even game specific vmap nodes."})}),"\n",(0,r.jsx)(n.h3,{id:"prefix_element",children:'"$prefix_element$"'}),"\n",(0,r.jsx)(n.p,{children:"The prefix element section is a DataModel feature allowing formats to store metadata, in vmaps it is used to store the map thumbnail and asset references."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"$prefix_element$"\n{\n    "id" "elementid" "836b03ef-c2a5-41a2-a13e-308a114a46b7"\n    "asset_preview_thumbnail" "binary" \n    "\n        FFD8FFE000104A46494600010101006000600000FFDB004300030202030202030303030403030405\n        0805050404050A070706080C0A0C0C0B0A0B0B0D...(shortened for example)\n    "\n    "asset_preview_thumbnail_format" "string" "jpg"\n    "map_asset_references" "string_array" \n    [\n        "materials/dev/reflectivity_30.vmat"\n    ]\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["asset_preview_thumbnail <",(0,r.jsx)(n.code,{children:"binary"}),">",(0,r.jsx)(n.br,{}),"\n","A binary blow storing the map thumbnail image."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["asset_preview_thumbnail_format <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Stores the format of the asset_preview_thumbnail image."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["map_asset_references <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","An array of every asset used in this map."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dmelement",children:"DMElement"}),"\n",(0,r.jsx)(n.p,{children:"Not a vmap node, but the base DataModel element that every other node inherits from, All nodes have these properties."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"id" "elementid" "53f14a8f-0ac6-4fba-a836-7d85d70bf641"\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["id <",(0,r.jsx)(n.code,{children:"elementid"}),">",(0,r.jsx)(n.br,{}),"\n","A UUID V4 ID used to refer to this node."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cmaprootelement",children:"CMapRootElement"}),"\n",(0,r.jsx)(n.p,{children:'This is the main element of the vmap, it contains a few map specific properties and helper objects, and the main "world" object. All Elements which are referenced more than once will be put inside of this Root node.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"CMapRootElement"\n{\n    "isprefab" "bool" "0"\n    "editorbuild" "int" "10533"\n    "editorversion" "int" "400"\n    "itemFile" "string" ""\n\n    "defaultcamera" "CStoredCamera"\n    "3dcameras" "CStoredCameras"\n    \n    "world" "CMapWorld" \n    "visbility" "CVisibilityMgr"\n    \n    "mapVariables" "CMapVariableSet"\n\n    "rootSelectionSet" "CMapSelectionSet"\n    \n    "m_ReferencedMeshSnapshots" "element_array" \n    [\n    ]\n\n    "m_bIsCordoning" "bool" "0"\n    "m_bCordonsVisible" "bool" "0"\n\n    "nodeInstanceData" "element_array" \n    [\n    ]\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["isprefab <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If the map is a prefab or not."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["editorbuild <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","The build number that you can view in ",(0,r.jsx)(n.code,{children:"Help -> About"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["editorversion <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["itemFile <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["defaultcamera <",(0,r.jsx)(n.code,{children:"[CStoredCamera](#cstoredcamera)"}),">",(0,r.jsx)(n.br,{}),"\n","The default editor camera."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["3dcameras <",(0,r.jsx)(n.code,{children:"[CStoredCameras](#cstoredcameras)"}),">",(0,r.jsx)(n.br,{}),"\n","A list of other editor cameras."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["world <",(0,r.jsx)(n.code,{children:"CMapWorld"}),">",(0,r.jsx)(n.br,{}),"\n","An Element containing Elements or referenced to Elements which make up the map like entities, meshes, etc.."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["visbility <",(0,r.jsx)(n.code,{children:"CVisibilityMgr"}),">",(0,r.jsx)(n.br,{}),"\n","Yes you read that right, this Element is hilariously misspelled as ",(0,r.jsx)(n.code,{children:"visbility"})," instead of ",(0,r.jsx)(n.code,{children:"visibility"}),". It keeps track of what is hidden in the map, from quick hide, selection sets, etc.."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["mapVariables <",(0,r.jsx)(n.code,{children:"CMapVariableSet"}),">",(0,r.jsx)(n.br,{}),"\n","Map variables, they can be set in the ",(0,r.jsx)(n.code,{children:"Map -> MapProperties -> Map Variables"})," tab."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["rootSelectionSet <",(0,r.jsx)(n.a,{href:"#cmapselectionset",children:"CMapSelectionSet"}),">",(0,r.jsx)(n.br,{}),"\n","A hidden selection set which contains all other selection sets."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["m_ReferencedMeshSnapshots <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","Mesh snapshots referenced by this map."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["m_bIsCordoning <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If the cordon tool is active."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["m_bCordonsVisible <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If the cordon tool is visible."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["nodeInstanceData <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","Per node instance data for things like hammer preview lighting"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"mapnode",children:"MapNode"}),"\n",(0,r.jsx)(n.p,{children:"This is not a real vmap node, but most nodes have these properties so it seems like a likely base class."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"MapNode"\n{\n    "id" "elementid" "53f14a8f-0ac6-4fba-a836-7d85d70bf641"\n    "nodeID" "int" "1"\n    "referenceID" "uint64" "0x0"\n    "children" "element_array"\n\n    "variableTargetKeys" "string_array" \n    "variableNames" "string_array" \n\n    "origin" "vector3" "0 0 0"\n    "angles" "qangle" "0 0 0"\n    "scales" "vector3" "1 1 1"\n\n    "transformLocked" "bool" "0"\n    "force_hidden" "bool" "0"\n    "editorOnly" "bool" "0"\n    "customVisGroup" "string" ""\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["nodeID <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","The ID of this node, can be seen in Hammer in the Outliner."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["referenceID <",(0,r.jsx)(n.code,{children:"uint64"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown, but seems to be some sort of pointer however Hammer will load maps just fine with this always being 0."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["children <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","All the children of this node, they can be other nodes directly (when the node only exists once) or UUID references to other nodes"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["variableTargetKeys <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","variableNames <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","Both seem to be related to the map variable system, possibly when a property of a node is using a map variable."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["origin <",(0,r.jsx)(n.code,{children:"vector3"}),">",(0,r.jsx)(n.br,{}),"\n","The origin of the node in Hammer units."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["angles <",(0,r.jsx)(n.code,{children:"qangle"}),">",(0,r.jsx)(n.br,{}),"\n","The angles of the node in euler angles."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["scales <",(0,r.jsx)(n.code,{children:"vector3"}),">",(0,r.jsx)(n.br,{}),"\n","The scales of the node."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["transformLocked <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If true, stops the origin, angles or scales of this object from being changed in Hammer, the option to toggle this in the UI shows in the Transform group in ",(0,r.jsx)(n.code,{children:"Object Properties"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["force_hidden <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If true it will force this object to not be visibile to VIS, shown in the Visibility group in ",(0,r.jsx)(n.code,{children:"Object Properties"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["editorOnly <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If true it will force this object to not be compiled into the map, useful for developer only messages, shown in the Visibility group in ",(0,r.jsx)(n.code,{children:"Object Properties"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["customVisGroup <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Will add a custom Vis group in the ",(0,r.jsx)(n.code,{children:"Auto Vis Groups"})," panel, this object will show under it, useful for organisation. Shown in the Visibility group in ",(0,r.jsx)(n.code,{children:"Object Properties"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"baseentity",children:"BaseEntity"}),"\n",(0,r.jsxs)(n.h4,{id:"inherits-from-mapnode",children:["Inherits from ",(0,r.jsx)(n.a,{href:"#mapnode",children:"MapNode"})]}),"\n",(0,r.jsxs)(n.p,{children:["This is not a real vmap node, but ",(0,r.jsx)(n.a,{href:"#cmapentity",children:"CMapEntity"}),", ",(0,r.jsx)(n.a,{href:"#cmapworld",children:"CMapWorld"})," and ",(0,r.jsx)(n.a,{href:"#cmapinstance",children:"CMapInstance"})," share these properties so this seems like a likely base class."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"relayPlugData" "DmePlugList" ""\n"connectionsData" "element_array" ""\n"entity_properties" "EditGameClassProps" ""\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["relayPlugData <",(0,r.jsx)(n.a,{href:"#dmepluglist",children:"DmePlugList"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["connectionsData <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","IO Outputs, contains ",(0,r.jsx)(n.a,{href:"#dmeconnectiondata",children:"DmeConnectionData"})," elements."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["entity_properties <",(0,r.jsx)(n.a,{href:"#editgameclassprops",children:"EditGameClassProps"}),">",(0,r.jsx)(n.br,{}),"\n","A string -> string dictionary of entity keyvalues."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dmepluglist",children:"DmePlugList"}),"\n",(0,r.jsx)(n.p,{children:"Unknown."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"relayPlugData" "DmePlugList"\n{\n    "id" "elementid" "53f14a8f-0ac6-4fba-a836-7d85d70bf641"\n    "names" "string_array" \n    [\n    ]\n    "dataTypes" "int_array" \n    [\n    ]\n    "plugTypes" "int_array" \n    [\n    ]\n    "descriptions" "string_array" \n    [\n    ]\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["names <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["dataTypes <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["plugTypes <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["descriptions <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dmeconnectiondata",children:"DmeConnectionData"}),"\n",(0,r.jsx)(n.p,{children:"An entity Output."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"DmeConnectionData"\n{\n    "id" "elementid" "53f14a8f-0ac6-4fba-a836-7d85d70bf641"\n    "outputName" "string" "OnUser1"\n    "targetType" "int" "7"\n    "targetName" "string" "!self"\n    "inputName" "string" "FireUser1"\n    "overrideParam" "string" "overrideExample"\n    "delay" "float" "0"\n    "timesToFire" "int" "-1"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["outputName <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the output."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["targetType <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown. Seems to always be 7?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["targetName <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the entity being targeted."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["inputName <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the input on the entity being targeted."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["overrideParam <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The value being passed along with the output."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["delay <",(0,r.jsx)(n.code,{children:"float"}),">",(0,r.jsx)(n.br,{}),"\n","The amount of time before the output is fired."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["timesToFire <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","How many times to refire the output."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"editgameclassprops",children:"EditGameClassProps"}),"\n",(0,r.jsx)(n.p,{children:"A string -> string dictionary storing entity keyvalues, seems to just be a standard kv2 element, which can act as a string dictionary."}),"\n",(0,r.jsx)(n.h3,{id:"cmapworld",children:"CMapWorld"}),"\n",(0,r.jsxs)(n.h4,{id:"inherits-from-baseentity---mapnode",children:["Inherits from ",(0,r.jsx)(n.a,{href:"#baseentity",children:"BaseEntity"})," -> ",(0,r.jsx)(n.a,{href:"#mapnode",children:"MapNode"})]}),"\n",(0,r.jsxs)(n.p,{children:["This is the main element that contains everything in the vmap, its also the entity you edit when you change properties in ",(0,r.jsx)(n.code,{children:"Map -> Map Properties"}),", it becomes the ",(0,r.jsx)(n.code,{children:"worldspawn"})," entity at runtime."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"world" "CMapWorld"\n{\n    "id" "elementid" "53f14a8f-0ac6-4fba-a836-7d85d70bf641"\n\n    "children" "element_array"\n\n    "variableTargetKeys" "string_array" \n    "variableNames" "string_array" \n    "relayPlugData" "DmePlugList"\n    "connectionsData" "element_array" \n    "nextDecalID" "int" "0"\n    "fixupEntityNames" "bool" "1"\n    "mapUsageType" "string" "standard"\n    "origin" "vector3" "0 0 0"\n    "angles" "qangle" "0 0 0"\n    "scales" "vector3" "1 1 1"\n    "transformLocked" "bool" "0"\n    "force_hidden" "bool" "0"\n    "editorOnly" "bool" "0"\n    "customVisGroup" "string" ""\n    "randomSeed" "int" "1641157616"\n    \n    "entity_properties" "EditGameClassProps"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["children <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","The children of CMapWorld are everything contained in the map, in the text encoding of DMX if a node is referenced only once, its inserted directly, if it is referenced more than once, it will be put into the Root element, in this case ",(0,r.jsx)(n.a,{href:"#cmaprootelement",children:"CMapRootElement"})," and it will be referenced by its UUID."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["nextDecalID <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["fixupEntityNames <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown. Prefabs have this option in order to prevent name collisions, why would the main VMAP need this tho?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["mapUsageType <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The type of the map."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["standard",(0,r.jsx)(n.br,{}),"\n","For normal maps."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["background",(0,r.jsx)(n.br,{}),"\n","For CS2 background UI maps."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["skybox",(0,r.jsx)(n.br,{}),"\n","For 3D skyboxes."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["minigame",(0,r.jsx)(n.br,{}),"\n","Used in Dota 2 for Crownfall Act 4."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["sharedenvironment",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["randomSeed <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown. Perhaps used for ",(0,r.jsx)(n.em,{children:"something"})," that needs a random seed, but what, and why can you set it?"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cstoredcamera",children:"CStoredCamera"}),"\n",(0,r.jsx)(n.p,{children:"An editor camera."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"defaultcamera" "CStoredCamera"\n{\n    "id" "elementid" "53f14a8f-0ac6-4fba-a836-7d85d70bf641"\n    "position" "vector3" "-291.7109680176 -261.1103210449 217.3533782959"\n    "lookat" "vector3" "-291.8317871094 -260.2921142578 216.7912902832"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["position <",(0,r.jsx)(n.code,{children:"vector3"}),">",(0,r.jsx)(n.br,{}),"\n","The position of the camera."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["lookat <",(0,r.jsx)(n.code,{children:"vector3"}),">",(0,r.jsx)(n.br,{}),"\n","This is the origin offset by one unit along the look vector."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cstoredcameras",children:"CStoredCameras"}),"\n",(0,r.jsx)(n.p,{children:"The editor cameras stored in the vmap."}),"\n",(0,r.jsx)(n.admonition,{type:"todo",children:(0,r.jsx)(n.p,{children:"When are multiple editor cameras stored in the vmap?"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"3dcameras" "CStoredCameras"\n{\n    "id" "elementid" "21382dc1-34f4-4dc1-b017-0f431fddfdd5"\n    "activecamera" "int" "-1"\n    "cameras" "element_array" \n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["activecamera <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","The current active camera index."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["cameras <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","An array of ",(0,r.jsx)(n.a,{href:"#cstoredcamera",children:"CStoredCamera"})," elements."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cvisibilitymgr",children:"CVisibilityMgr"}),"\n",(0,r.jsxs)(n.h4,{id:"inherits-from-mapnode-1",children:["Inherits from ",(0,r.jsx)(n.a,{href:"#mapnode",children:"MapNode"})]}),"\n",(0,r.jsx)(n.p,{children:"Manages hiding nodes."}),"\n",(0,r.jsx)(n.admonition,{type:"todo",children:(0,r.jsx)(n.p,{children:"Why is this a node? can you select this in Hammer somehow? It seems to always be at 0 0 0."})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"visbility" "CVisibilityMgr"\n{\n    "id" "elementid" "ce0026f6-da81-41e3-9267-3d2bdadba660"\n    "nodeID" "int" "0"\n    "referenceID" "uint64" "0x0"\n    "children" "element_array" \n    "variableTargetKeys" "string_array" \n    "variableNames" "string_array" \n    "nodes" "element_array" \n    "hiddenFlags" "int_array" `\n    "origin" "vector3" "0 0 0"\n    "angles" "qangle" "0 0 0"\n    "scales" "vector3" "1 1 1"\n    "transformLocked" "bool" "0"\n    "force_hidden" "bool" "0"\n    "editorOnly" "bool" "0"\n    "customVisGroup" "string" ""\n    "randomSeed" "int" "634985197"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["nodes <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","Every node in the map which can be hidden."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["hiddenFlags <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Per node hide flags, this array indexes into the ",(0,r.jsx)(n.code,{children:"nodes"})," element array."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["0",(0,r.jsx)(n.br,{}),"\n","Visible."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["1",(0,r.jsx)(n.br,{}),"\n","Selection set."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["2",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["3",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["4",(0,r.jsx)(n.br,{}),"\n","Quick hide."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cmapselectionset",children:"CMapSelectionSet"}),"\n",(0,r.jsx)(n.p,{children:"A selection set."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"CMapSelectionSet"\n{\n    "id" "elementid" "2fa0034b-467f-4a4f-aa22-a432a2fee57c"\n    "children" "element_array" \n    "selectionSetName" "string" "selectionset"\n    "selectionSetData" "CObjectSelectionSetDataElement"\n},\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["children <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","Selection sets can contain other selection sets, this is not selected objects, those are stored in selectionSetData."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["selectionSetName <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the selection set."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["selectionSetData <",(0,r.jsx)(n.a,{href:"#dmelement",children:"DMElement"}),">",(0,r.jsx)(n.br,{}),"\n","The data of the selection set, it seems to be an opaque element but it only takes ",(0,r.jsx)(n.code,{children:"CObjectSelectionSetDataElement"})," and ",(0,r.jsx)(n.code,{children:"CFaceSelectionSetDataElement"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cobjectselectionsetdataelement",children:"CObjectSelectionSetDataElement"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"selectionSetData" "CObjectSelectionSetDataElement"\n{\n    "id" "elementid" "ab42b08e-ab9b-4d9f-b2c7-299b165b1f2e"\n    "name" "string" "objectSelectionSetData"\n    "selectedObjects" "element_array" \n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["name <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the selection set data element. doesn't seem like the user can set this, its always ",(0,r.jsx)(n.code,{children:"objectSelectionSetData"}),", may be used to tell which data object selectionSetData contains in their DMX implementation?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["selectedObjects <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","A list of the objects contained in this selection set."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cfaceselectionsetdataelement",children:"CFaceSelectionSetDataElement"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"selectionSetData" "CFaceSelectionSetDataElement"\n{\n    "id" "elementid" "fe928e85-ae50-4034-8016-7ff0cdf77a64"\n    "name" "string" "faceSelectionSetData"\n    "meshes" "element_array" \n    "faces" "int_array" \n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["name <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the selection set data element. doesn't seem like the user can set this, its always ",(0,r.jsx)(n.code,{children:"faceSelectionSetData"}),", may be used to tell which data object selectionSetData contains in their DMX implementation?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["meshes <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","A list of the meshes contained in this selection set."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["faces <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","A list of mesh faces contained in this selection set."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cmapprefab",children:"CMapPrefab"}),"\n",(0,r.jsxs)(n.h4,{id:"inherits-from-mapnode-2",children:["Inherits from ",(0,r.jsx)(n.a,{href:"#mapnode",children:"MapNode"})]}),"\n",(0,r.jsx)(n.p,{children:"A prefab."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"CMapPrefab"\n{\n    "id" "elementid" "5e3176dd-3b19-4f28-8318-7ebaa88b9a90"\n    "nodeID" "int" "6"\n    "referenceID" "uint64" "0xdadc15530f843d58"\n    "children" "element_array" \n    "variableTargetKeys" "string_array" \n    "variableNames" "string_array" \n    "relayPlugData" "DmePlugList"\n    "connectionsData" "element_array" \n    "target" "element" ""\n    "variableOverrideNames" "string_array" \n    "variableOverrideValues" "string_array" \n    "origin" "vector3" "0 0 0"\n    "angles" "qangle" "0 0 0"\n    "scales" "vector3" "1 1 1"\n    "transformLocked" "bool" "0"\n    "force_hidden" "bool" "0"\n    "editorOnly" "bool" "0"\n    "customVisGroup" "string" ""\n    "randomSeed" "int" "1910343828"\n    "tintColor" "color" "255 255 255 255"\n    "visexclude" "bool" "0"\n    "targetMapPath" "string" "maps/prefabs/s2wikiprefab.vmap"\n    "targetName" "string" ""\n    "fixupEntityNames" "bool" "1"\n    "useTargetNameAsPrefix" "bool" "0"\n    "loadIfNested" "bool" "1"\n    "prefabRuntimeEntity" "bool" "0"\n    "loadAtRuntime" "bool" "0"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["target <",(0,r.jsx)(n.code,{children:"element"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["variableOverrideNames <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["variableOverrideValues <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["targetMapPath <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The map to load."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["fixupEntityNames <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If enabled, any entity target names within the prefab will have a prefix applied to ensure they are unique. This prevents any issues with entities in two different prefabs having name collisions."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["useTargetNameAsPrefix <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If this is enabled and name fixup is enabled, the prefix used for name fixup will be the prefab target name instead of the unique id. If the target name is empty then the prefab the unique id will still be used as the prefix. Note that if two prefabs use the same target name for their prefix it will be possible to have entities inside the prefabs end up with name collisions."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["loadIfNested <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If enabled the prefab will be loaded when it is the child of another prefab, if disabled, this prefab will not be loaded if it is the child of another prefab."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["prefabRuntimeEntity <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["loadAtRuntime <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","If enabled the prefab will not be baked into the parent map during map compile, but instead will be dynamically loaded in the game. This requires the target map to be compiled separately. Additionally this requires support for dynamic loading of maps by the game, which may not be supported by all games and game systems. Do not use without checking to see if this is fully supported by the game you are working on."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cmapinstance",children:"CMapInstance"}),"\n",(0,r.jsxs)(n.h4,{id:"inherits-from-mapnode-3",children:["Inherits from ",(0,r.jsx)(n.a,{href:"#mapnode",children:"MapNode"})]}),"\n",(0,r.jsx)(n.p,{children:"An instance."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"CMapInstance"\n{\n    "id" "elementid" "b4c5ff57-756d-4fad-b2c4-7c3599acd5d1"\n    "nodeID" "int" "9"\n    "referenceID" "uint64" "0xa644a071fe2a1342"\n    "variableTargetKeys" "string_array" \n    "variableNames" "string_array" \n    "relayPlugData" "DmePlugList"\n    "connectionsData" "element_array" \n    "target" "element" "d3c5aac9-c6b0-4ca0-a74f-1bad53097d65"\n    "origin" "vector3" "-328 -80 24"\n    "angles" "qangle" "0 0 0"\n    "scales" "vector3" "1 1 1"\n    "transformLocked" "bool" "0"\n    "force_hidden" "bool" "0"\n    "editorOnly" "bool" "0"\n    "customVisGroup" "string" ""\n    "randomSeed" "int" "1789577885"\n    "tintColor" "color" "255 255 255 255"\n    "visexclude" "bool" "0"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["target <",(0,r.jsx)(n.code,{children:"element"}),">\\\nA ",(0,r.jsx)(n.a,{href:"#cmapgroup",children:"CMapGroup"})," element containing all the objects inside of this instance."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["tintColor <",(0,r.jsx)(n.code,{children:"color"}),">\\\nIf this color is set, all objects inside of the instance will be tinted."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["visexclude <",(0,r.jsx)(n.code,{children:"bool"}),">\\\nIf true, everything inside of the instance will be excluded from vis."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cmapgroup",children:"CMapGroup"}),"\n",(0,r.jsxs)(n.h4,{id:"inherits-from-mapnode-4",children:["Inherits from ",(0,r.jsx)(n.a,{href:"#mapnode",children:"MapNode"})]}),"\n",(0,r.jsx)(n.p,{children:"A group which can contain nodes, it seems to inherit from the MapNode baseclass without any changes."}),"\n",(0,r.jsx)(n.h3,{id:"cmapvariableset",children:"CMapVariableSet"}),"\n",(0,r.jsx)(n.p,{children:"Stores map variables."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"mapVariables" "CMapVariableSet"\n{\n    "id" "elementid" "80fdfd0c-3ea4-4519-9e66-23fafdc20d60"\n    "variableNames" "string_array" \n    "variableValues" "string_array" \n    "variableTypeNames" "string_array" \n    "variableTypeParameters" "string_array" \n    "m_ChoiceGroups" "element_array" \n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["variableNames <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the map variable."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["variableValues <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","The value of the map variable."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["variableTypeNames <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","The type of the map variable, like ",(0,r.jsx)(n.code,{children:"string"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["variableTypeParameters <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","The type paremeter of the map variable, not sure what this is."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["m_ChoiceGroups <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","Not sure what this does either, but takes a ",(0,r.jsx)(n.a,{href:"#cmapvariablechoicegroup",children:"CMapVariableChoiceGroup"})," object."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cmapvariablechoicegroup",children:"CMapVariableChoiceGroup"}),"\n",(0,r.jsx)(n.p,{children:"A map variable choice group."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"CMapVariableChoiceGroup"\n{\n    "id" "elementid" "795f358a-afb8-4f98-993b-0fd940de5aae"\n    "name" "string" "newChoiceGroup"\n    "m_ChoiceVariables" "string_array" \n    "m_Choices" "element_array" \n    "m_ActiveValue" "string" ""\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["name <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the choice group."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Honestly not even gonna try to pretend like I understand these, if you do, feel free to complete this list."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["The following mesh related nodes will only be explained in short as they are quite complex, an in-depth explanation can be found in the ",(0,r.jsx)(n.a,{href:"#hammer-meshes",children:"Hammer meshes"})," section of this page."]})}),"\n",(0,r.jsx)(n.h3,{id:"cmapmesh",children:"CMapMesh"}),"\n",(0,r.jsxs)(n.h4,{id:"inherits-from-mapnode-5",children:["Inherits from ",(0,r.jsx)(n.a,{href:"#mapnode",children:"MapNode"})]}),"\n",(0,r.jsx)(n.p,{children:"A Hammer mesh."}),"\n",(0,r.jsx)(n.p,{children:"Inherited properties will be ommited below due to the large size of this node."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"CMapMesh"\n{\n    "id" "elementid" "581ccd67-3a41-4d2a-b6b0-8cf6fbbe493e"\n    "meshData" "CDmePolygonMesh"\n    "disableShadows" "int" "0"\n    "bakelighting" "bool" "1"\n    "cubeMapName" "string" ""\n    "emissiveLightingEnabled" "bool" "1"\n    "emissiveLightingBoost" "float" "1"\n    "lightingDummy" "bool" "0"\n\n    "visexclude" "bool" "0"\n    "disablemerging" "bool" "0"\n    "renderwithdynamic" "bool" "0"\n    "renderToCubemaps" "bool" "1"\n    "keep_vertices" "bool" "0"\n    "fademindist" "float" "-1"\n    "fademaxdist" "float" "0"\n\n    "disableHeightDisplacement" "bool" "0"\n    "smoothingAngle" "float" "40"\n    "tintColor" "color" "255 255 255 255"\n    "renderAmt" "int" "255"\n    "physicsType" "string" "default"\n    "physicsCollisionProperty" "string" ""\n    "physicsGroup" "string" ""\n\n    "physicsInteractsAs" "string" ""\n    "physicsInteractsWith" "string" ""\n    "physicsInteractsExclude" "string" ""\n    "physicsSimplificationOverride" "bool" "0"\n    "physicsSimplificationError" "float" "0"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["meshData <",(0,r.jsx)(n.code,{children:"CDmePolygonMesh"}),">",(0,r.jsx)(n.br,{}),"\n","A ",(0,r.jsx)(n.a,{href:"#cdmepolygonmesh",children:"CDmePolygonMesh"})," element storing all the polygon mesh information."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["disableShadows <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","When true causes this mesh to not cast any shadows."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["bakelighting <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","When true will stop lighting from being baked on this mesh."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["cubeMapName <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Used to manually assign a named env_cubemap, env_cubemap_box or env_combined_light_probe_volume to a mesh."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"This forces the mesh into a slower rendering path and does not support the explicit assignment of lightprobes. Use with caution."})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["emissiveLightingEnabled <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","Allow this mesh to emit lighting. Note that this only works on materials with Self Illum parameters, and is only visible in the GPU Path Tracing Preview and in the final lightmap bake."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["emissiveLightingBoost <",(0,r.jsx)(n.code,{children:"float"}),">",(0,r.jsx)(n.br,{}),"\n","Used to boost emissive lighting from a mesh. Note that boosting emissive on smaller meshes can create more lighting artifacts/noise."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["lightingDummy <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","Causes the mesh to contribute to lighting, but not render in the final map."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["visexclude <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","When true forces this mesh to not contribute to VIS."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["disablemerging <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","When true, disables compile time mesh merging, meaning this mesh wont merge with meshes sharing the same material."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["renderwithdynamic <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","When true causes this mesh to render in the dynamic pass, with other dynamic entities like players."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["keep_vertices <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["fademindist <",(0,r.jsx)(n.code,{children:"float"}),">",(0,r.jsx)(n.br,{}),"\n","The distance at which this mesh will start to fade."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["fademaxdist <",(0,r.jsx)(n.code,{children:"float"}),">",(0,r.jsx)(n.br,{}),"\n","The distance at which this mesh is entirely invisible."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["disableHeightDisplacement <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","When true it disables displacement."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["smoothingAngle <",(0,r.jsx)(n.code,{children:"float"}),">",(0,r.jsx)(n.br,{}),"\n","The minimum angle for an edge to automatically become smooth."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["tintColor <",(0,r.jsx)(n.code,{children:"Color"}),">",(0,r.jsx)(n.br,{}),"\n","Tints the mesh."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["renderAmt <",(0,r.jsx)(n.code,{children:"float"}),">",(0,r.jsx)(n.br,{}),"\n","The alpha transparency of the mesh."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsType <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The physics type of the mesh."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["none",(0,r.jsx)(n.br,{}),"\n","Not solid."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["default",(0,r.jsx)(n.br,{}),"\n","Seems to be ",(0,r.jsx)(n.code,{children:"mesh"})," by default."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["convex_single",(0,r.jsx)(n.br,{}),"\n","A single convex hull"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["convex_multi",(0,r.jsx)(n.br,{}),"\n","Multiple convex hulls (per piece?)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["mesh",(0,r.jsx)(n.br,{}),"\n","A triangle mesh."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsCollisionProperty <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","If specified, provides the name of an entry in scripts/collision_properties.txt that specifies the collision group and interaction layers to use, rather than those specified in the material."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsGroup <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Directly specifies the name of a collision group to assign to the mesh, replaces any group specified by the material or collision property."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsInteractsAs <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Specifies additional interaction layers to append to the set of Interacts As layers assigned to the mesh."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsInteractsWith <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Specifies additional interaction layers to append to the set of Interacts With layers assigned to the mesh."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsInteractsExclude <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Specifies additional interaction layers to append to the set of Interacts With layers assigned to the mesh."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsSimplificationOverride <",(0,r.jsx)(n.code,{children:"bool"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown. Possibly forces physics simplification on/off?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["physicsSimplificationError <",(0,r.jsx)(n.code,{children:"float"}),">",(0,r.jsx)(n.br,{}),"\n","The error permitted when simplifying the geometry of this mesh into a physics mesh."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cdmepolygonmesh",children:"CDmePolygonMesh"}),"\n",(0,r.jsx)(n.p,{children:"This element contains all of the half-edge polygon data of a hammer mesh."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"meshData" "CDmePolygonMesh"\n{\n    "id" "elementid" "d4460070-41c1-4483-a0b1-b850b32eccc4"\n    "name" "string" "meshData"\n    "vertexEdgeIndices" "int_array" \n    "vertexDataIndices" "int_array" \n    "edgeVertexIndices" "int_array" \n    "edgeOppositeIndices" "int_array" \n    "edgeNextIndices" "int_array" \n    "edgeFaceIndices" "int_array" \n    "edgeDataIndices" "int_array" \n    "edgeVertexDataIndices" "int_array" \n    "faceEdgeIndices" "int_array" \n    "faceDataIndices" "int_array" \n    "materials" "string_array" \n    "vertexData" "CDmePolygonMeshDataArray"\n    "faceVertexData" "CDmePolygonMeshDataArray"\n    "edgeData" "CDmePolygonMeshDataArray"\n    "faceData" "CDmePolygonMeshDataArray"\n    "subdivisionData" "CDmePolygonMeshSubdivisionData"\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["name <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Seems to always be ",(0,r.jsx)(n.code,{children:"meshData"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["vertexEdgeIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","An index to one of the half-edges starting from this vertex."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["vertexDataIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Index to the ",(0,r.jsx)(n.code,{children:"VertexData"})," streams."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["edgeVertexIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","The destination vertex of this half-edge."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["edgeOppositeIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Index to the twin of this half-edge."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["edgeNextIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Index to the half-edge that this half-edge points to."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["edgeFaceIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Index to the face this half-edge is part of, -1 if the half edge is next to the void (external half-edge)."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["edgeDataIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Per half-edge index to ",(0,r.jsx)(n.code,{children:"EdgeData"})," streams."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["edgeVertexDataIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Per half-edge index to ",(0,r.jsx)(n.code,{children:"FaceVertexData"})," streams."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["faceEdgeIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Per face index to one of the ",(0,r.jsx)(n.strong,{children:"inner"})," edges encapsulating this face. This effectively is what encodes faces in the mesh, one entry here is one face."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["faceDataIndices <",(0,r.jsx)(n.code,{children:"int_array"}),">",(0,r.jsx)(n.br,{}),"\n","Per Face index to ",(0,r.jsx)(n.code,{children:"FaceData"})," streams."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["materials <",(0,r.jsx)(n.code,{children:"string_array"}),">",(0,r.jsx)(n.br,{}),"\n","A list of every material used in the mesh, without duplicates, this will be indexed into by ",(0,r.jsx)(n.code,{children:"meshindex"})," in the ",(0,r.jsx)(n.code,{children:"FaceData"})," stream."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["vertexData <",(0,r.jsx)(n.code,{children:"CDmePolygonMeshDataArray"}),">",(0,r.jsx)(n.br,{}),"\n","Stores vertex positions."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["faceVertexData <",(0,r.jsx)(n.code,{children:"CDmePolygonMeshDataArray"}),">",(0,r.jsx)(n.br,{}),"\n","Stores per half-edge information for face vertex uv, normal, tangent, etc."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["edgeData <",(0,r.jsx)(n.code,{children:"CDmePolygonMeshDataArray"}),">",(0,r.jsx)(n.br,{}),"\n","Stores edge data such as soft or hard normals."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["faceData <",(0,r.jsx)(n.code,{children:"CDmePolygonMeshDataArray"}),">",(0,r.jsx)(n.br,{}),"\n","Stores face data such as texture scale, UV offset, material, lightmap bias."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["subdivisionData <",(0,r.jsx)(n.code,{children:"CDmePolygonMeshSubdivisionData"}),">",(0,r.jsx)(n.br,{}),"\n","Data representing the subdivided surface of the mesh."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cdmepolygonmeshdataarray",children:"CDmePolygonMeshDataArray"}),"\n",(0,r.jsx)(n.p,{children:"An array of CDmePolygonMeshDataStream elements."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"vertexData" "CDmePolygonMeshDataArray"\n{\n    "id" "elementid" "fe15bacb-f08e-4500-a7dd-99144aca5567"\n    "size" "int" "4"\n    "streams" "element_array" \n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["size <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","The amount of elements in the arrays."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["streams <",(0,r.jsx)(n.code,{children:"element_array"}),">",(0,r.jsx)(n.br,{}),"\n","An array of ",(0,r.jsx)(n.code,{children:"CDmePolygonMeshDataStream"})," elements."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cdmepolygonmeshdatastream",children:"CDmePolygonMeshDataStream"}),"\n",(0,r.jsx)(n.p,{children:"A data stream."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"CDmePolygonMeshDataStream"\n{\n    "id" "elementid" "0766ecc4-d5d4-45b6-bb90-b688e786bc5c"\n    "name" "string" "position:0"\n    "standardAttributeName" "string" "position"\n    "semanticName" "string" "position"\n    "semanticIndex" "int" "0"\n    "vertexBufferLocation" "int" "0"\n    "dataStateFlags" "int" "3"\n    "subdivisionBinding" "element" ""\n    "data" "vector3_array" \n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["name <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Seems to be ",(0,r.jsx)(n.code,{children:"semanticName"}),":",(0,r.jsx)(n.code,{children:"semanticIndex"}),", not sure why they store this separately here."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["standardAttributeName <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","Seems to be the same as semanticName."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["semanticName <",(0,r.jsx)(n.code,{children:"string"}),">",(0,r.jsx)(n.br,{}),"\n","The name of the stream."]}),"\n",(0,r.jsx)(n.p,{children:"Known names:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"position"}),"\n",(0,r.jsx)(n.li,{children:"normal"}),"\n",(0,r.jsx)(n.li,{children:"tangent"}),"\n",(0,r.jsx)(n.li,{children:"texcoord"}),"\n",(0,r.jsx)(n.li,{children:"lightmapScaleBias"}),"\n",(0,r.jsx)(n.li,{children:"flags"}),"\n",(0,r.jsx)(n.li,{children:"materialindex"}),"\n",(0,r.jsx)(n.li,{children:"textureAxisU"}),"\n",(0,r.jsx)(n.li,{children:"textureAxisV"}),"\n",(0,r.jsx)(n.li,{children:"textureScale"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["semanticIndex <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","Index of the stream."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["vertexBufferLocation <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["dataStateFlags <",(0,r.jsx)(n.code,{children:"int"}),">",(0,r.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["subdivisionBinding <",(0,r.jsx)(n.code,{children:"element"}),">",(0,r.jsx)(n.br,{}),"\n","Seems related to how data on subdivided meshes is handled."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["data <",(0,r.jsx)(n.code,{children:"int | vector2_array | vector3_array | vector4_array"}),">",(0,r.jsx)(n.br,{}),"\n","The data stored in this stream, can be an int, vector2, vector3, or vector4 array."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"hammer-meshes",children:"Hammer meshes"}),"\n",(0,r.jsx)(n.p,{children:"Source2 Hammer is also a modeling tool allowing users to create complex 3D meshes, due to this the format for its meshes is quite complex."}),"\n",(0,r.jsx)(n.h3,{id:"explanation-of-half-edge-meshes",children:"Explanation of half-edge meshes"}),"\n",(0,r.jsxs)(n.p,{children:["Hammer meshes are stored in a format known as a ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Doubly_connected_edge_list",children:"half-edge data structure"}),",\nthis format is widely used to represent polygonal meshes by many DCC apps such as Blender due to its efficient manipulation of topology and ability to handle polygons with an arbitrary amount of sides, making it easy to edit the mesh."]}),"\n",(0,r.jsxs)(n.p,{children:["Below is an example of how a simple quad is represented using half edges, the blue half edges are internal edges, and the green ones are external.\n",(0,r.jsx)(n.img,{alt:"half-edge example",src:s(48910).A+"",title:"Half-Edge Example",width:"828",height:"837"})]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://jerryyin.info/geometry-processing-algorithms/half-edge/",children:"This site"})," offers a great interactive playground showcasing how half-edge meshes work.",(0,r.jsx)(n.br,{}),"\n","An implementation of how to write hammer meshes can be found in the map decompilation code of ",(0,r.jsx)(t,{name:"github",suffix:"VRF (s2v)",link:"https://github.com/ValveResourceFormat/ValveResourceFormat/blob/master/ValveResourceFormat/IO/HammerMeshBuilder.cs"})]}),(0,r.jsx)(n.p,{children:"From this point on it will be assumed that you have at least a basic understanding of half-edge meshes."})]}),"\n",(0,r.jsx)(n.h3,{id:"topology-limitations",children:"Topology limitations"}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["It is impossible to represent non-manifold meshes such as a ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/M%C3%B6bius_strip",children:"M\xf6bius strip"})," as a hammer mesh!"]}),(0,r.jsxs)(n.p,{children:["Due to the nature of half-edge meshes, it can only represent ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Manifold",children:"manifold"})," geometry, arbitrary 3D ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Triangle_mesh",children:"triangle meshes"}),' used in video game levels can and will often\nviolate this, in which case converting from arbitrary triangle meshes to half-edge meshes needs careful sanitisation of the topology! When using the\n"Convert Models To Hammer Mesh" option, Hammer usually simply ',(0,r.jsx)(n.em,{children:"deletes"})," the offending faces. Due to this it is not recommended to be used for converting complex models to hammer meshes."]})]}),"\n",(0,r.jsx)(n.p,{children:"Below is a list of potential topology issues you might encounter while converting triangle meshes to half-edge meshes, taken out of Hammer's system for doing this."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Face specified an edge which already had two faces attached (this will fail because half-edge only supports two faces being linked by an edge, due to only ever being two twins forming one edge by definition.)."}),"\n",(0,r.jsx)(n.li,{children:"Face specified a vertex which had edges attached, but none that were open."}),"\n",(0,r.jsx)(n.li,{children:"Face specified a vertex that had multiple open edges and did not connect to any existing edge."}),"\n",(0,r.jsx)(n.li,{children:"Face specified two edges that are connected by a vertex but have one or more existing edges separating them."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"anatomy-of-a-hammer-mesh",children:"Anatomy of a Hammer mesh"}),"\n",(0,r.jsx)(n.p,{children:"This section will go over how meshes are stored in the vmap, and how to read them."}),"\n",(0,r.jsxs)(n.h4,{id:"explanation-of-cdmepolygonmesh",children:["Explanation of ",(0,r.jsx)(n.a,{href:"#cdmepolygonmesh",children:"CDmePolygonMesh"})]}),"\n",(0,r.jsx)(n.p,{children:"This element stores all the half-edge information describing the mesh, below is an example of a mesh describing a simple quad."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["The mesh below is missing all data streams apart from ",(0,r.jsx)(n.code,{children:"vertexData"})," which contains vertex positions, this is the only stream strictly necessary to the explanation."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"meshData" "CDmePolygonMesh"\n{\n    "id" "elementid" "d4460070-41c1-4483-a0b1-b850b32eccc4"\n    "name" "string" "meshData"\n    "vertexEdgeIndices" "int_array" \n    [\n        "7", "1", "5", "3"\n    ]\n    "vertexDataIndices" "int_array" \n    [\n        "0", "1", "2", "3"\n    ]\n    "edgeVertexIndices" "int_array" \n    [\n        "1", "0", "3", "1", "2", "3", "0", "2"\n    ]\n    "edgeOppositeIndices" "int_array" \n    [\n        "1", "0", "3", "2", "5", "4", "7", "6"\n    ]\n    "edgeNextIndices" "int_array" \n    [ \n        "2", "7", "4", "1", "6", "3", "0", "5"\n    ]\n    "edgeFaceIndices" "int_array" \n    [\n        "0", "-1", "0", "-1", "0", "-1", "0", "-1"\n    ]\n    "edgeDataIndices" "int_array" \n    [\n        "0", "0", "1", "1", "2", "2", "3", "3"\n    ]\n    "edgeVertexDataIndices" "int_array" \n    [\n        "1", "0", "3", "2", "5", "4", "7", "6"\n    ]\n    "faceEdgeIndices" "int_array" \n    [\n        "6"\n    ]\n    "faceDataIndices" "int_array" \n    [\n        "0"\n    ]\n    "materials" "string_array" \n    [\n        "materials/dev/reflectivity_30.vmat"\n    ]\n    "vertexData" "CDmePolygonMeshDataArray"\n    {\n        "id" "elementid" "fe15bacb-f08e-4500-a7dd-99144aca5567"\n        "size" "int" "4"\n        "streams" "element_array" \n        [\n            "CDmePolygonMeshDataStream"\n            {\n                "id" "elementid" "0766ecc4-d5d4-45b6-bb90-b688e786bc5c"\n                "name" "string" "position:0"\n                "standardAttributeName" "string" "position"\n                "semanticName" "string" "position"\n                "semanticIndex" "int" "0"\n                "vertexBufferLocation" "int" "0"\n                "dataStateFlags" "int" "3"\n                "subdivisionBinding" "element" ""\n                "data" "vector3_array" \n                [\n                    "-64 -64 0",\n                    "64 -64 0",\n                    "-64 64 0",\n                    "64 64 0"\n                ]\n            }\n        ]\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:'At first glance this might seem intimidating, but its actually quite easy to read, we will show how to read the mesh manually\nand sketch it "on paper" which is really helpful for debugging but this explanation should also be easily translatable to code.'}),"\n",(0,r.jsxs)(n.p,{children:["First, we need to look at the ",(0,r.jsx)(n.code,{children:"vertexData"})," stream, and plot the vertex positions in the ",(0,r.jsx)(n.code,{children:"data"})," field, and index them as we go."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"An easy way to do this is by just pasting the positions into the origin field of a hammer entity."})}),"\n",(0,r.jsx)(n.p,{children:"Here's the result:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Reading half edge mesh example 1",src:s(14639).A+"",width:"578",height:"518"})}),"\n",(0,r.jsxs)(n.p,{children:["Next, we want to draw out the half edges, for this we need to look at the ",(0,r.jsx)(n.code,{children:"edgeVertexIndices"})," and ",(0,r.jsx)(n.code,{children:"edgeFaceIndices"})," lists."]}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:"edgeVertexIndices"})," the first index is ",(0,r.jsx)(n.code,{children:"1"}),", this means that the first half-edge ",(0,r.jsx)(n.strong,{children:"points"})," at the second vertex, the vertex with index 1."]}),"\n",(0,r.jsxs)(n.p,{children:["Next, we want to determine if this in an internal or external half edge, for this we need to look at ",(0,r.jsx)(n.code,{children:"edgeFaceIndices"}),", the first index is ",(0,r.jsx)(n.code,{children:"0"}),", which means the half-edge is part of the first (and only) face meaning its internal."]}),"\n",(0,r.jsxs)(n.p,{children:["This might not seem like enough to determine which half edge is pointing to vertex index 1, but it is, due to the winding order of internal half-edges always being\n",(0,r.jsx)(n.strong,{children:"clockwise"}),", and external half edges always being in the opposite direction of internal ones, we only have two candidates."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Reading half edge mesh example 2",src:s(95732).A+"",width:"578",height:"518"})}),"\n",(0,r.jsx)(n.p,{children:"As seen in the image above, since we already determined that our half-edge is internal, which means its on the inside of the face, this narrows it down to one half edge."}),"\n",(0,r.jsxs)(n.p,{children:["Great! we have now read our first half-edge, we will also need to index these so write down a ",(0,r.jsx)(n.code,{children:"0"})," next to this one, now on to the second one, we can repeat the steps from above."]}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:"edgeVertexIndices"})," the second index is ",(0,r.jsx)(n.code,{children:"0"}),", this means that the second half-edge points at the first vertex.\nIn ",(0,r.jsx)(n.code,{children:"edgeFaceIndices"})," the second index is ",(0,r.jsx)(n.code,{children:"-1"}),", this means that the second half-edge is an external half edge."]}),"\n",(0,r.jsx)(n.p,{children:"We can apply the same logic from above to arrive at this:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Reading half edge mesh example 3",src:s(16861).A+"",width:"578",height:"518"})}),"\n",(0,r.jsxs)(n.p,{children:["We can verify our work by checking the ",(0,r.jsx)(n.code,{children:"edgeOppositeIndices"})," array, the first index is ",(0,r.jsx)(n.code,{children:"1"})," and the second is ",(0,r.jsx)(n.code,{children:"0"}),", this means that the first half-edge is opposing the second, and the second is opposing the first, which matches our image."]}),"\n",(0,r.jsx)(n.p,{children:"We will now skip ahead to the next two half edges."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Reading half edge mesh example 4",src:s(20514).A+"",width:"578",height:"518"})}),"\n",(0,r.jsxs)(n.p,{children:["Now that we have half-edges on multiple sides of the face, we can further check our work by looking at the ",(0,r.jsx)(n.code,{children:"edgeNextIndices"})," array."]}),"\n",(0,r.jsxs)(n.p,{children:["The first index is ",(0,r.jsx)(n.code,{children:"2"})," meaning the first half-edge points to the half-edge with index 2, checking half-edge index 3 in that array we can see its meant to point to half-edge index 1, our image aligns with this which means it is correct!"]}),"\n",(0,r.jsx)(n.p,{children:"We can now skip to the finished image."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Reading half edge mesh example 5",src:s(41643).A+"",width:"578",height:"518"})}),"\n",(0,r.jsx)(n.h3,{id:"reading-polygon-data-out-of-hammer-meshes-from-code",children:"Reading polygon data out of hammer meshes from code"}),"\n",(0,r.jsx)(n.p,{children:"If you just want to read the polygon data, reading the meshes from code is quite easy, its similar to the process from above but much simpler."}),"\n",(0,r.jsxs)(n.p,{children:["Vertices are simply contained in the ",(0,r.jsx)(n.code,{children:"vertexData"})," stream, and to get indices we just need a simple do while loop."]}),"\n",(0,r.jsx)(n.p,{children:"Example of reading the entire mesh, as explained above faceEdgeIndices stores one of the internal half edges of every face, so we want to loop this."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// an array to store faces, which are arrays of vertex indices\nList<List<int>> faces = []\n\n// go trough all faceEdgeIndices\nfor (int i = 0; i < faceEdgeIndices.Count; i++)\n{\n    // stores the indices of the current face\n    List<int> faceIndices = [];\n\n    // edgeNextIndices gives us the half edge that out current half edge is pointing do, here we simply start with the half edge from the current faceEdgeIndices index (faceEdge)\n    // and then keep looping, finding the next half edge and setting that as our next, until next == faceEdge, this means that we did a full loop around the face, and extraced all indices\n    \n    // as we loop we store edgeVertexIndices[nextFaceEdge] into faceIndices, this gives us our face indices because edgeVertexIndices is the index of the vertex that the edge starts from\n    \n    var faceEdge = faceEdgeIndices[i];\n    var nextFaceEdge = faceEdge;\n    do\n    {\n        faceIndices.Add(edgeVertexIndices[nextFaceEdge]);\n        nextFaceEdge = mesh.meshData.edgeNextIndices[nextFaceEdge];\n    }\n    while (nextFaceEdge != faceEdge);\n\n    faces.Add(faceIndices);\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Reading other data like normals and UVs is left as an exercise for the reader."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["If you want to render these meshes, you will first need to convert the n-sided polygon faces to triangles. A good algorithm for this is ",(0,r.jsx)(n.a,{href:"https://www.geometrictools.com/Documentation/TriangulationByEarClipping.pdf",children:"Ear Clipping"})]})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},95732:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/halfedge-reading-2-df2ae6c471147765ad9efe5b50d9e66e.png"}}]);