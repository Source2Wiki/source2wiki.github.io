"use strict";(self.webpackChunksource_2_wiki=self.webpackChunksource_2_wiki||[]).push([[99936],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(96540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},90385:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"FileFormats/vmap/index","title":"VMAP","description":"The file format for uncompiled Source2 maps.","source":"@site/docs/FileFormats/vmap/index.mdx","sourceDirName":"FileFormats/vmap","slug":"/FileFormats/vmap/","permalink":"/FileFormats/vmap/","draft":false,"unlisted":false,"editUrl":"https://github.com/Source2Wiki/Source2Wiki/blob/master/docs/FileFormats/vmap/index.mdx?plain=1","tags":[],"version":"current","frontMatter":{"description":"The file format for uncompiled Source2 maps.","title":"VMAP"},"sidebar":"tutorialSidebar","previous":{"title":"KV3","permalink":"/FileFormats/kv3"},"next":{"title":"example.vmap","permalink":"/FileFormats/vmap/example.vmap"}}');var t=i(74848),r=i(28453);const o={description:"The file format for uncompiled Source2 maps.",title:"VMAP"},l=void 0,a={},c=[{value:"Vmap example",id:"vmap-example",level:2},{value:"Vmap file structure",id:"vmap-file-structure",level:2},{value:"CMapRootElement",id:"cmaprootelement",level:3}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Game:i,Tool:s}=n;return i||h("Game",!0),s||h("Tool",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[".vmap is the file format for uncompiled Source2 maps when they are being edited in ",(0,t.jsx)(n.a,{href:"/EngineTools/HammerEditor/",children:"Hammer"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["It is a ",(0,t.jsx)(n.a,{href:"/FileFormats/dmx",children:"DMX"})," file under binary encoding version 4, ",(0,t.jsx)(n.a,{href:"/EngineTools/HammerEditor/",children:"Hammer"})," can export a plain text version if you go to ",(0,t.jsx)(n.code,{children:"File -> Save Copy As Text"})]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(s,{name:"s2v"})," can decompile compiled maps (.vmap_c usually contained within a VPK) into a .vmap"]})}),"\n",(0,t.jsx)(n.h2,{id:"vmap-example",children:"Vmap example"}),"\n",(0,t.jsxs)(n.p,{children:["The following is a simple vmap in plain text format from ",(0,t.jsx)(i,{name:"cs2"})," consisting of a hammer mesh and an entity."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["The Root of a vmap DMX file is ",(0,t.jsx)(n.code,{children:"CMapRootElement"}),(0,t.jsx)(n.br,{}),"\n","In the text encoding of DMX, when an Element is only referenced once, it will be directly inserted as a value of the property that references it, when it's referenced multiple times, it will be extracted and put into the Root element, and everything referencing it will reference its GUID."]})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/FileFormats/vmap/example.vmap",children:"Vmap example"})," (external page due to the large size)"]}),"\n",(0,t.jsx)(n.h2,{id:"vmap-file-structure",children:"Vmap file structure"}),"\n",(0,t.jsxs)(n.p,{children:["A list of vmap DMX nodes can be found below, this list is based on a ",(0,t.jsx)(i,{name:"cs2"})," version 40 vmap."]}),"\n",(0,t.jsxs)(n.p,{children:["Annoyingly the ",(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Naming_convention_(programming)",children:"naming convention"})," of attributes in vmaps is all over the place, some of the cases used include:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"flatcase"}),"\n",(0,t.jsx)(n.li,{children:"camelCase"}),"\n",(0,t.jsx)(n.li,{children:"PascalCase"}),"\n",(0,t.jsx)(n.li,{children:"snake_case"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"m_"})," member variable notation"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"todo",children:(0,t.jsx)(n.p,{children:"Would be nice to have info on which nodes exists in what vmap version, and possibly even game specific vmap nodes."})}),"\n",(0,t.jsx)(n.h3,{id:"cmaprootelement",children:"CMapRootElement"}),"\n",(0,t.jsx)(n.p,{children:'This is the main element of the vmap, it contains a few map specific properties and helper objects, and the main "world" object. All Elements which are referenced more than once will be put inside of this Root node.'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"CMapRootElement"\n{\n\t"isprefab" "bool" "0"\n\t"editorbuild" "int" "10533"\n\t"editorversion" "int" "400"\n\t"itemFile" "string" ""\n\n\t"defaultcamera" "CStoredCamera"\n\t"3dcameras" "CStoredCameras"\n\t\n\t"world" "CMapWorld" \n\t"visbility" "CVisibilityMgr"\n\t\n\t"mapVariables" "CMapVariableSet"\n\n\t"rootSelectionSet" "CMapSelectionSet"\n\t\n\t"m_ReferencedMeshSnapshots" "element_array" \n\t[\n\t]\n\n\t"m_bIsCordoning" "bool" "0"\n\t"m_bCordonsVisible" "bool" "0"\n\n\t"nodeInstanceData" "element_array" \n\t[\n\t]\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["isprefab : ",(0,t.jsx)(n.code,{children:"bool"}),(0,t.jsx)(n.br,{}),"\n","If the map is a prefab or not."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["editorbuild : ",(0,t.jsx)(n.code,{children:"int"}),(0,t.jsx)(n.br,{}),"\n","The build number that you can view in ",(0,t.jsx)(n.code,{children:"Help -> About"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["editorversion : ",(0,t.jsx)(n.code,{children:"int"}),(0,t.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["itemFile : ",(0,t.jsx)(n.code,{children:"string"}),(0,t.jsx)(n.br,{}),"\n","Unknown."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["defaultcamera : ",(0,t.jsx)(n.code,{children:"CStoredCamera"}),(0,t.jsx)(n.br,{}),"\n","The default editor camera."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["3dcameras : ",(0,t.jsx)(n.code,{children:"CStoredCameras"}),(0,t.jsx)(n.br,{}),"\n","A list of other editor cameras."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["world : ",(0,t.jsx)(n.code,{children:"CMapWorld"}),(0,t.jsx)(n.br,{}),"\n","An Element containing Elements or referenced to Elements which make up the map like entities, meshes, etc.."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["visbility : ",(0,t.jsx)(n.code,{children:"CVisibilityMgr"}),(0,t.jsx)(n.br,{}),"\n","Yes you read that right, this Element is hilariously misspelled as ",(0,t.jsx)(n.code,{children:"visbility"})," instead of ",(0,t.jsx)(n.code,{children:"visibility"}),". It keeps track of what is hidden in the map, from quick hide, selection sets, etc.."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["mapVariabled : ",(0,t.jsx)(n.code,{children:"CMapVariableSet"}),(0,t.jsx)(n.br,{}),"\n","Map variables, they can be set in the ",(0,t.jsx)(n.code,{children:"Map -> MapProperties -> Map Variables"})," tab."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["rootSelectionSet : ",(0,t.jsx)(n.code,{children:"CMapSelectionSet"}),(0,t.jsx)(n.br,{}),"\n","A hidden selection set which contains all other selection sets."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["m_ReferencedMeshSnapshots : ",(0,t.jsx)(n.code,{children:"element_array"}),(0,t.jsx)(n.br,{}),"\n","Mesh snapshots referenced by this map."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["m_bIsCordoning : ",(0,t.jsx)(n.code,{children:"bool"}),(0,t.jsx)(n.br,{}),"\n","If the cordon tool is active."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["m_bCordonsVisible : ",(0,t.jsx)(n.code,{children:"bool"}),(0,t.jsx)(n.br,{}),"\n","If the cordon tool is visible."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["nodeInstanceData : ",(0,t.jsx)(n.code,{children:"element_array"}),(0,t.jsx)(n.br,{}),"\n","Per node instance data for things like hammer preview lighting"]}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);